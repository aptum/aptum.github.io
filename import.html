<!-- 
	vim: tabstop=2:softtabstop=2:shiftwidth=2:noexpandtab
-->
<html>
	<head>
		<meta charset='utf-8'>
		<title>Addr Import</title>
	</head>
	<body>

	<table>
		<tr>
			<td>
				Select postal code:
			</td>
			<td>
				<input
					type="number" min="1000" max="9999"
					id="pcodeInput"
					title="Enter the postal code you want to query"/>
			</td>
		</tr>
		<tr>
			<td>
				Filter streets:
			</td>
			<td>
				<input
					type="text"
					value="*"
					id="filterStreetsInput"
					title="Only show certain streets (use * as wildcard)."/>
			</td>
		</tr>
		<tr>
			<td>
				Load OSM data:
			</td>
			<td>
				<input 
					type="checkbox"
					id="loadOsmInput"
					title="Check this to also compare the CRAB data to the latest OSM data"/>
			</td>
		</tr>
		<tr>
			<td>
				Max distance:
			</td>
			<td>
				<input
					type="number" step="any" min="0"
					id="maxDistanceInput"
					title="Allowed difference between CRAB and OSM data (meters). Use 0 to not compare the distance (default)."/>
			</td>
		</tr>
	</table>
	<button type="button" onclick="gotoPermalink()">Update</button>

	<table id="streetsTable">
		<thead>
			<tr>
				<th title="Name of the street">Name</th>
				<th title="All adresses in CRAB">Total</th>
				<th title="Number of regular housenumbers not present in OSM">Missing</th>
				<th title="Housenumbers where different ones are merged under the same hnrlabel, since they're overlapping. Map these with care, and decide if they belong to the same building or not.">Missing overlapping</th>
				<th title="Housenumbers in OSM but without match in CRAB, please survey in case of doubt">Wrong</th>
			</tr>
		</thead>
		<tbody id="streetsTableBody">
		</tbody>
	</table>

	<br/>
	<small>
		This page contains <a href="https://download.agiv.be/Producten/Detail?id=102&title=CRAB_adresposities">CRAB</a> (&copy; AGIV; Free Open Data License Flanders v1.0) and OSM data (&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap contributors</a>)
	</small>

	<script type="text/javascript" src="loadStreets.js"></script>
	<script type="text/javascript">
		// Read the URL query to set stuff
		var query = window.location.search.substring(1);
		var vars = query.split("&");
		for (var i = 0; i < vars.length; i++)
		{
			var kv = vars[i].split("=");
			if (kv.length != 2)
				continue;
			kv[0] += "Input"
			if (kv[1] == "true")
				document.getElementById(kv[0]).checked = true;
			else if (kv[1] == "false")
				document.getElementById(kv[0]).checked = false;
			else
				document.getElementById(kv[0]).value = decodeURIComponent(kv[1]);
		}

		readPcode();

		// Make table sortable
		var table = document.getElementById("streetsTable");
		var th = table.tHead;
		var cells = th.rows[0].cells;
		for (var i = 0; i < cells.length; i++)
		{
			(function (i) {
				var reverse = true;
				cells[i].addEventListener('click', function() {sortTable(i, (reverse = !reverse)); });
			}(i));
		}
	</script>

	</body>
</html>
